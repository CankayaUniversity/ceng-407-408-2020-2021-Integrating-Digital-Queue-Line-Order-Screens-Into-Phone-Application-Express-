<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Sing in & Sign Up Form </title>
    <link rel="stylesheet" type="text/css" href="style.css">
    
  

</head>

<body>
    <div class="topnav">
        <a  href="ekleme.html">Create a Restaurants</a>
			<a href="signUp.html">Sign Up</a>
			<a href="Login.html">Login</a>
			
			<a href="sırala.html" >Orders</a> 
            <a href="index.html" >List of Restaurants</a>
            <a href="index2.html" >List of Menus</a>

    </div>
    <section>
    

        <div class="user signupBx">
            <div class="imgBx"><img src="logo.png" height="15%" width="15%"></div>
            <div class=form>
                <form action="./restaurant.html" method="POST">
                    <h2>Sign Up</h2>
                    <input id="name" type="text" name="name" placeholder="name" value="">
                    <input id="password" type="text" name="password" placeholder="password" value="">
                    
                    <input id="email" type="text" name="email" placeholder="email">
                    
                    
            
                    <input type="submit"  value="Login">
                    
                </form>
            </div>
        </div>

    </div>

   
</section>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script>

    $("form").submit(function(e){
        e.preventDefault();

        let name = $('#name').val();

        let password = $('#password').val();
        
        
        
        
        let email = $('#email').val();

       // if(name && password && email){
        //jquery boşluk kontrolu 
       // }
        
        


        fetch('http://104.248.207.133:5000/api/v1/auth/register', {
            method: 'POST',
            headers: {
                'content-type': 'application/json'
            },
            body: JSON.stringify({

                name: name,
               password : password,
                email: email,
                role: "owner"

                

            })
        })
        .then(res => res.json())
        .then((data)=>{
            if(data.success===true){
            localStorage.setItem("token" , data.token);
            
            console.log(localStorage.getItem("token"));
            window.location.replace("ekleme.html");
            }
        })
        .catch(error => console.log("ERROR"))

       

    }); 

    // fetch('http://104.248.207.133:5000/api/v1/restaurants', {
    //         method: 'GET',
    //         headers: {
    //             'content-type': 'application/json'
    //         }
           
    //     })
    //     .then(res => res.json())
        
    //     .then(data => console.log(data))
        
        
    //     .catch(error => console.log("ERROR"))

    fetch("http://104.248.207.133:5000/api/v1/restaurants/"+id, {
  'method': 'GET',
  'headers': {
    
  }
})
  .then(response => console.log(response))
  .catch(err => console.error(err));

</script>


</body>
</html>